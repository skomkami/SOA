<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
<h:head>
   <title>Survey</title>
   <link rel="stylesheet" type="text/css" href="style.css"/>
</h:head>

<h:body>

   <h:panelGroup layout="block" id="banner">
      <h:commandLink style="display:block;">
         <f:ajax event="click" listener="#{banner.incrementClicks}" render="bannerClicks"/>
         <h1>Banner #{banner.randomAd}</h1>
      </h:commandLink>
       <h:outputText id="bannerClicks" value="Number of clicks: #{banner.clicks}"/>
   </h:panelGroup><br/><br/>

   <h:form id="mainSurvey">
      <h:outputLabel for="name">
         Enter your name:
      </h:outputLabel>
      <h:inputText required="true" id="name" value="#{survey.person.name}">
         <f:ajax event="keyup" reRender="@this" render="validationMessages"/>
      </h:inputText><br/>

      <h:outputLabel for="email">
         Enter your email:
      </h:outputLabel>
      <h:inputText id="email" value="#{survey.person.email}" required="true">
         <f:validateRegex pattern="[^@]+@[^\.]+\..+"/>
         <f:ajax event="keyup" reRender="@this" render="validationMessages"/>
      </h:inputText><br/>

      <h:outputLabel for="gender">
         Enter your gender:
      </h:outputLabel>
      <h:selectOneMenu id="gender" value="#{survey.person.gender}" required="true">
         <f:selectItem itemLabel="-" itemValue="#{null}" noSelectionOption="true" />
         <f:selectItems value="#{survey.genders}"/>
         <f:ajax event="change" render="height validationMessages femaleInfo maleInfo"/>
      </h:selectOneMenu><br/>

      <h:outputLabel for="age">
         Enter your age:
      </h:outputLabel>
      <h:inputText id="age" value="#{survey.person.age}">
         <f:validateLongRange minimum="10" maximum="100" />
         <f:ajax event="keyup" reRender="@this" render="validationMessages"/>
      </h:inputText><br/>

      <h:outputLabel for="height">
         Enter your height:
      </h:outputLabel>
      <h:inputText id="height" value="#{survey.person.height}">
         <f:ajax event="keyup" reRender="@this" render="validationMessages"/>
      </h:inputText><br/><br/>

<!--      Female part      -->
      <h:panelGroup id="femaleInfo">
         <h:panelGroup id="femaleInfoForm" rendered="#{survey.person.isFemale}">

            <h:outputLabel for="bustSize">
               Enter your bust size:
            </h:outputLabel>
            <h:inputText id="bustSize" value="#{survey.person.femaleInfo.bustSize}">
               <f:validateLongRange/>
               <f:ajax event="keyup" reRender="@this" render="validationMessages"/>
            </h:inputText><br/>

            <h:outputLabel for="cupSize">
               Select your cup size:
            </h:outputLabel>
            <h:selectOneMenu id="cupSize" value="#{survey.person.femaleInfo.cupSize}">
               <f:selectItem itemLabel="-" itemValue="#{null}" noSelectionOption="true" />
               <f:selectItems value="#{survey.person.femaleInfo.cupSizes}"/>
               <f:ajax event="change" render="validationMessages"/>
            </h:selectOneMenu><br/>

            <h:outputLabel for="femaleWaist">
               Enter your waist size:
            </h:outputLabel>
            <h:inputText id="femaleWaist" value="#{survey.person.femaleInfo.waist}">
               <f:validateLongRange/>
               <f:ajax event="keyup" reRender="@this" render="validationMessages"/>
            </h:inputText><br/>

            <h:outputLabel for="hips">
               Enter your waist size:
            </h:outputLabel>
            <h:inputText id="hips" value="#{survey.person.femaleInfo.hips}">
               <f:validateLongRange/>
               <f:ajax event="keyup" reRender="@this" render="validationMessages"/>
            </h:inputText><br/>
         </h:panelGroup>
      </h:panelGroup>

<!--      Male part      -->

      <h:panelGroup id="maleInfo">
         <h:panelGroup id="maleInfoFrom" rendered="#{survey.person.isMale}">
            <h:outputLabel for="maleChest">
               Enter your chest size:
            </h:outputLabel>
            <h:inputText id="maleChest" value="#{survey.person.maleInfo.chest}">
               <f:validateLongRange/>
               <f:ajax event="keyup" reRender="@this" render="validationMessages"/>
            </h:inputText><br/>


            <h:outputLabel for="maleWaist">
               Enter your waist size:
            </h:outputLabel>
            <h:inputText id="maleWaist" value="#{survey.person.maleInfo.waist}">
               <f:validateLongRange/>
               <f:ajax event="keyup" reRender="@this" render="validationMessages"/>
            </h:inputText><br/>
         </h:panelGroup>
      </h:panelGroup>

      <h:commandButton type="submit" value="Submit survey">
      </h:commandButton><br/>

      <h:messages id="validationMessages" styleClass="error"/>
   </h:form>
</h:body>
</html>
